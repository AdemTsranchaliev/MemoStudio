<div class="card-body pb-2">
  <form [formGroup]="bookingForm" (ngSubmit)="submitForm()">
    <h4>Настройки по подразбиране на календар</h4>
    <p style="font-size: small" class="text-muted">
      Настройките по подразбиране се прилагат на всеки ден от календара. Ако
      желаете да приложите настройки на определен ден, може да го направите от
      календара като отидете на определената дата.
    </p>
    <mat-divider class="py-2"></mat-divider>
    <div class="row">
      <div class="col-sm-6">
        <label class="custom-field-select w-100">
          <select placeholder=" " [(ngModel)]="startPeriodIndex" class="w-100" [ngModelOptions]="{standalone: true}"
            (change)="dateChange('start')">
            <option *ngFor="let time of timeSlots; let i=index" value="{{i}}">
              {{time| utcToLocal:'HH:mm'}} ч.

            </option>
          </select>
          <span class="placeholder-select cursor-text">Начален час</span>
        </label>
      </div>

      <div class="col-sm-6">
        <label class="custom-field-select w-100">
          <select placeholder=" " [(ngModel)]="endPeriodIndex" class="w-100" [ngModelOptions]="{standalone: true}"
            (change)="dateChange('end')">
            <option *ngFor="let time of timeSlots; let i=index" value="{{i}}">
              {{time| utcToLocal:'HH:mm'}} ч.
            </option>
          </select>
          <span class="placeholder-select cursor-text">Краен час</span>
        </label>
      </div>
    </div>

    <label class="custom-field-select w-100">
      <select class="w-100" placeholder=" " formControlName="interval" (change)="dateChange('interval')">
        <option *ngFor="let duration of durations" [value]="duration">
          {{ duration }}
        </option>
      </select>
      <span class="placeholder-select cursor-text">Интервал на часовете</span>
    </label>

    <div (change)="toggleAdditionalSettings()">
      <mat-checkbox [(ngModel)]="additionalSettings" [ngModelOptions]="{standalone: true}">Допълнителни
        настройки</mat-checkbox>
    </div>

    <h6 class="text-dark" *ngIf="additionalSettings">Селектирайте в кои часове ще работите</h6>
    <div class="hours-container" *ngIf="additionalSettings">
      <div class="calendar-event-card cursor-pointer" *ngFor="let booking of bookings; let i = index"
        (click)="toggleSelection(i)">

        <div class="border rounded shadow p-2 text-dark" [class.border-primary]="!isSelected(i)"
          [class.border-danger]="isSelected(i)">
          <div class="d-flex justify-content-between px-2">
            <span [class.text-danger]="isSelected(i)">
              {{booking | utcToLocal:'HH:mm'}}ч.
            </span>

            <span>
              <i *ngIf="!isSelected(i)" class="fas fa-check text-primary fs-22"></i>
              <i *ngIf="isSelected(i)" class="fas fa-times text-danger fs-22"></i>
            </span>
          </div>
        </div>

      </div>
    </div>

    <app-selection-list [workingDays]="workingDaysFormArray" [title]="'Работни дни'"></app-selection-list>

    <mat-checkbox class="mt-3" formControlName="allowUserBooking">
      Позволи потребителите да запазват часове
    </mat-checkbox>

    <div class="text-right m-4">
      <button type="submit" mat-raised-button color="primary">
        Запази промени
      </button>
      &nbsp;
      <button mat-stroked-button color="primary">Отказ</button>
    </div>
  </form>
</div>