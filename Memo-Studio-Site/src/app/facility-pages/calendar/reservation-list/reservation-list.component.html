<ul class="nav nav-tabs" style="background-color: white !important">
  <li class="nav-item" style="width: 33.33%">
    <p class="nav-link text-center" id="all-res" [ngClass]="{
        active: selectedFilter == 1,
        'not-active-tab': selectedFilter != 1
      }" (click)="showBookings(1)">
      Всички
    </p>
  </li>
  <li class="nav-item" style="width: 33.33%">
    <p class="nav-link text-center" id="free-res" [ngClass]="{
        active: selectedFilter == 2,
        'not-active-tab': selectedFilter != 2
      }" (click)="showBookings(2)">
      Свободни
    </p>
  </li>
  <li class="nav-item" style="width: 33.33%">
    <p class="nav-link text-center" [ngClass]="{
        active: selectedFilter == 3,
        'not-active-tab': selectedFilter != 3
      }" id="busy-res" (click)="showBookings(3)">
      Заети
    </p>
  </li>
</ul>

<!-- Start Alert -->
<ng-container *ngIf="isOpen && bookings.length == 0 && !isDayPast && isServerDown == false">
  <app-static-alert-message class="m-2"
    [alertMessage]="'Все още няма заети часове за' + ' ' + (this.date.date()) + ' '+ (date | bulgarianDate) + ' ' + date.year() + 'г.'"
    alertStyle="alert-info">
  </app-static-alert-message>
</ng-container>
<!-- End Alert -->

<!-- Start Alert -->
<ng-container *ngIf="isDayPast">
  <app-static-alert-message class="m-2" alertMessage="Изминала дата, нямате право на действие." alertStyle="alert-info">
  </app-static-alert-message>
</ng-container>
<!-- End Alert -->

<!-- Start Alert -->
<ng-container *ngIf="bookings.length == 0 && isDayPast">
  <app-static-alert-message class="m-2" alertMessage="За този ден няма резервирани часове."
    alertStyle="alert-secondary">
  </app-static-alert-message>
</ng-container>
<!-- End Alert -->

<!-- Start Alert -->
<ng-container *ngIf="!isOpen && !isDayPast">
  <app-static-alert-message class="m-2" alertMessage="Неработен ден" alertStyle="alert-info">
  </app-static-alert-message>
</ng-container>
<!-- End Alert -->

<!-- Display Hours -->
<div class="event-card" *ngFor="let booking of bookings">
  <!-- Render Olny Reserved Hours -->
  <div *ngIf="!booking.isFree&&isOpen||isDayPast">
    <mat-accordion>
      <mat-expansion-panel class="event-expansion-panel" hideToggle>
        <mat-expansion-panel-header class="reservation-container">
          <mat-panel-title>
            {{booking.timestamp | utcToLocal:'HH:mm'}} ч.
          </mat-panel-title>

          <mat-panel-description>
            <div class="d-flex justify-content-between">
              <span class="truncate-text margin-right">
                {{ (booking?.name || 'NO NAME') | truncate : 50 }}
              </span>

              <span class="">
                <a href="tel:{{ booking.phone }}">
                  {{ booking.phone || 'NO PHONE' }}
                </a>
              </span>

              <span *ngIf="!isDayPast">
                <i class="fa ml-1 col-1" style="cursor: pointer"
                  (click)="onRemoveBooking(booking.bookingId)">&#xf00d;</i>
              </span>
            </div>
          </mat-panel-description>

          <!-- Show style if reservation have Notes -->
          <span class="element-notes" *ngIf="booking?.note"></span>
        </mat-expansion-panel-header>
        <div class="row">
          <span class="col-12 a-start margin-b"> Име: {{ booking.name }} </span>
          <span class="col-12 a-start margin-b"> Телефон:
            <a href="tel:{{ booking.phone }}">
              {{ booking.phone }}
            </a>
          </span>
          <span class="col-12 a-start margin-b"> Имейл: {{ booking.email }} </span>
          <span class="col-12 a-start margin-b"> Продължителност: {{ booking.duration }} </span>
          <span class="col-12 a-start" *ngIf="booking?.note">
            Бележка: {{ booking?.note }}
          </span>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
  </div>

  <!-- Render Olny Free Hours -->
  <div *ngIf="booking.isFree&&isOpen" style="cursor: pointer">
    <div class="border border-primary rounded shadow p-2 text-dark text-center"
      (click)="openBookingDialog(booking.timestamp)">
      {{booking.timestamp | utcToLocal:'HH:mm'}} ч.
    </div>
  </div>
</div>

<!-- Modal - will be removed -->
<div class="modal fade" id="modalNote" tabindex="-1" role="dialog" aria-labelledby="modalNote" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalNote">
          Забележка - {{ noteModal?.name }}
        </h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <h4>{{ noteModal?.note }}</h4>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Затвори
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Loader -->
<div class="events-container text-primary text-center mt-5" *ngIf="loader && isServerDown == false">
  <div class="spinner-border" role="status">
    <span class="sr-only">Зареждане...</span>
  </div>
</div>

<div class="text-center center-transform" *ngIf="isServerDown == true">
  <span class="server-down-msg">Няма връзка до сървъра!</span>
</div>