<div class="container my-5 py-5 pb-90">
  <div class="card justify-content-center mx-230 custom-shadow">
    <div>
      <div class="card-body pb-2">
        <form [formGroup]="bookingForm" (ngSubmit)="submitForm()">
          <h4 class="text-center">Довършване на регистрация</h4>
          <mat-divider class="py-2"></mat-divider>

          <mat-stepper>
            <mat-step>
              <div class="row justify-content-center">
                <article class="col-4 img-container">
                  <img *ngIf="user?.profilePictureBase64" [src]="user?.profilePictureBase64" alt="" />
                  <img *ngIf="!user?.profilePictureBase64" src="assets/images/default-user.png" alt="" />
                </article>

                <mat-hint class="col-12 text-center my-2">
                  *Профиллната снимка е препоръчителна
                </mat-hint>
                <article class="col-12 text-center">
                  <button mat-raised-button color="primary" (click)="openDialog()">
                    Качи снимка на бизнеса
                  </button>
                </article>
              </div>

              <div>
                <label class="custom-field w-100" [ngClass]="{'invalid-field': utilityService.HasError(bookingForm, 'businessName', 'required') &&
                utilityService.IsTouched(bookingForm, 'businessName')}">
                  <input class="w-100" placeholder=" " formControlName="businessName" />
                  <span class="placeholder cursor-text">Име на бизнес</span>
                </label>

                <mat-error class="fs-11" *ngIf="utilityService.HasError(bookingForm, 'businessName', 'required') &&
                utilityService.IsTouched(bookingForm, 'businessName')">
                  Това поле е задължително.
                </mat-error>
              </div>

              <div class="row">
                <div class="col-sm-6">
                  <label class="custom-field-select w-100">
                    <select placeholder=" " [(ngModel)]="startPeriodIndex" class="w-100"
                      [ngModelOptions]="{ standalone: true }" (change)="dateChange(true)">
                      <option *ngFor="let time of timeSlots; let i = index" value="{{ i }}">
                        {{ time | utcToLocal:'HH:mm' }} ч.
                      </option>
                    </select>
                    <span class="placeholder-select cursor-text">Работен ден - Начало</span>
                  </label>
                </div>

                <div class="col-sm-6">
                  <label class="custom-field-select w-100">
                    <select placeholder=" " [(ngModel)]="endPeriodIndex" class="w-100"
                      [ngModelOptions]="{ standalone: true }" (change)="dateChange(false)">
                      <option *ngFor="let time of timeSlots; let i = index" value="{{ i }}">
                        {{ time | utcToLocal:'HH:mm' }} ч.
                      </option>
                    </select>
                    <span class="placeholder-select cursor-text">Работен ден - Край</span>
                  </label>
                </div>
              </div>
              <label class="custom-field-select w-100">
                <select class="w-100" placeholder=" " formControlName="interval">
                  <option *ngFor="let duration of durations" [value]="duration">
                    {{ duration }}
                  </option>
                </select>
                <span class="placeholder-select cursor-text">Интервал на часовете</span>
              </label>

              <div class="separator mt-2">Добавете социални мрежи</div>

              <div class="row">
                <div class="col-sm-6">
                  <div class="w-100">
                    <label class="custom-field w-100">
                      <input type="password" class="w-100" placeholder=" " name="socialInstagram"
                        formControlName="socialInstagram" />
                      <span class="placeholder cursor-text">Instagram</span>
                    </label>
                  </div>
                  <div class="fs-11 mt-min-4">
                    <mat-hint>*Това поле НЕ е задължително</mat-hint>
                  </div>
                </div>

                <div class="col-sm-6">
                  <div class="w-100">
                    <label class="custom-field w-100">
                      <input type="password" class="w-100" placeholder=" " name="socialFacebook"
                        formControlName="socialFacebook" />
                      <span class="placeholder cursor-text">Facebook</span>
                    </label>
                  </div>
                  <div class="fs-11 mt-min-4">
                    <mat-hint>*Това поле НЕ е задължително</mat-hint>
                  </div>
                </div>
              </div>

              <app-selection-list [workingDays]="workingDaysFormArray" [title]="'Работни дни'"></app-selection-list>

              <mat-checkbox class="mt-3" formControlName="allowUserBooking">
                Позволи потребителите да запазват часове
              </mat-checkbox>

              <div class="float-right mt-5">
                <button matStepperNext mat-raised-button>
                  Напред
                  <mat-icon>arrow_forward</mat-icon>
                </button>
              </div>
            </mat-step>

            <mat-step>
              <app-services-tab [mobileLength]="mobileLength" [desktopLength]="desktopLength" [hasHeader]="false">
              </app-services-tab>

              <div class="d-flex justify-content-between mt-4">
                <button matStepperPrevious mat-raised-button>
                  <mat-icon>arrow_back</mat-icon> Назад
                </button>

                <button type="submit" mat-raised-button color="primary">
                  Запази промени
                </button>
              </div>
            </mat-step>
          </mat-stepper>
        </form>
      </div>
    </div>
  </div>
</div>